openapi: 3.0.3
info:
  title: Buyer Service - OpenAPI 3.0
  version: 1.0.0
externalDocs:
  description: Buyer Service draft spec swagger
  url: http://swagger.io
servers:
  - url: "https://proxy.qa.nocnoc-internal.com/buyer-service"
paths:
  /v1/user/quotation/summary:
    post:
      tags:
        - Quotation
      parameters:
       - name: x-nocnoc-platform
         in: header
         schema:
          type: string
       - name: x-nocnoc-device-os
         in: header
         schema:
          type: string
       - name: x-cookie-id
         in: header
         schema:
          type: string
       - name: x-session-id
         in: header
         schema: 
          type: string
       - name: x-nocnoc-device-id
         in: header
         description: device id generate from FE
         schema:
          type: string
       - name: x-request-id
         in: header
         schema:
          type: string
       - name: x-nocnoc-id
         in: header
         required: true
         description: nocnoc-id decrypt by local authorizer
         schema:
          type: string
      summary: Calculate price and discount
      description: Calculate price and discount for both product and shipping
      operationId: quotationSummary
      requestBody:
        description: Sum the final quotation
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/quotationSummaryRequest'
        required: true
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/quotationSummaryResponse'
        '400':
          description: Invalid input
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                InvalidParameter:
                  summary: invalid parameter
                  value:
                    errors:
                      title: "invalid_parameter"
                      message: "Invalid carrierId, please check request body"
                InvalidSignature:
                  summary: invalid signature
                  value:
                    errors:
                      title: "invalid_signature"
                      message: "Invalid quotationSignature, plase check request body"
                InvalidDeliveryOption:
                  summary: invalid delivery option
                  value:
                    errors:
                      title: "invalid_delivery_option"
                      message: "delivery option not found"
                InvalidQuotationData:
                  summary: invalid quotation data
                  value:
                    errors:
                      title: "invalid_quotation_data"
                      message: "Cannot decode quotationData, plase check request body"
        '401':
          description: Unauthorize
        '404':
          description: Not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/errorResponse'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ExternalServerError:
                  summary: Internal server error
                  value:  
                    errors:
                      title: "internal_server_error"
                      message: "Something wrong, or {{some error message}}"
                UnknownPromotionBusinessType:
                  summary: Unknown promotion business type
                  value:  
                    errors:
                      title: "unknown_promotion_business_type"
                      message: "Unknown promotion business type"
        '502':
          description: External Server Error
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/errorResponse'
              examples:
                ExternalServerError:
                  summary: External server error
                  value:  
                    errors:
                      title: "external_server_error"
                      message: "[Promotion] Get seller promotion sku pricing has error"
  /v1/user/my-order:
    post:
      tags:
        - My Orders
      parameters:
        - name: x-nocnoc-platform
          in: header
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          schema:
           type: string
        - name: x-cookie-id
          in: header
          schema:
            type: string
        - name: x-session-id
          in: header
          schema: 
            type: string
        - name: x-nocnoc-device-id
          in: header
          description: device id generate from FE
          schema:
            type: string
        - name: x-request-id
          in: header
          schema:
            type: string
        - name: x-nocnoc-id
          in: header
          required: true
          description: nocnoc-id decrypt by local authorizer
          schema:
            type: string
        - name: CF-Request-ID
          in: header
          description: cloudflare request id
          schema:
            type: string
      summary: Get user order lists
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/userOrderListRequest'
        required: true
      responses: 
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/userOrderListResponse'
  /v1/user/my-order/{userId}/{orderNo}:
    get:
      tags:
        - My Orders
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: integer
        - in: path
          name: orderNo
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:    
              schema:
                $ref: '#/components/schemas/shipmentDetailResponse'
        '403':
          description: Forbidden response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shipmentDetailErrorResponse'
        '401':
          description: Unauthorize response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shipmentDetailErrorResponse'
        '404':
          description: Unauthorize response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/shipmentDetailErrorResponse'
      

  /v1/user/quotation:
    post:
      tags:
        - Create Quotation
      summary: Create Quotation
      description: ''
      operationId: Create Quotation
      parameters:
        - name: x-nocnoc-platform
          in: header
          description: app / web
          required: false
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          description: android, ios, desktop, tablet, mobile
          required: false
          schema:
            type: string
        - name: x-nocnoc-cookie-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-session-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: Accept-Language
          in: header
          description: Not Required But Default value en
          required: false
          schema:
            type: string 
        - name: Authorization
          in: header
          description: Token From Login
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
               $ref: '#/components/schemas/CreateQuotationRequest'
      responses:
        '200':
          description: products with delivery options
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateQuotationResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
    put:
      tags:
        - Update Quotation
      summary: Update Quotation
      description: ''
      operationId: Update Quotation
      parameters:
        - name: x-nocnoc-platform
          in: header
          description: app / web
          required: false
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          description: android, ios, desktop, tablet, mobile
          required: false
          schema:
            type: string
        - name: x-nocnoc-cookie-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-session-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: Accept-Language
          in: header
          description: Not Required But Default value en
          required: false
          schema:
            type: string 
        - name: Authorization
          in: header
          description: Token From Login
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
               $ref: '#/components/schemas/UpdateQuotationRequest'
      responses:
        '200':
          description: products with delivery options
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateQuotationResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'    
    
  /v1/user/cart:
    get:
      tags:
        - Cart
      summary: Get Cart
      parameters:
        - name: x-nocnoc-platform
          in: header
          description: app / web
          required: false
          schema:
            type: string
        - name: x-nocnoc-device-os
          in: header
          description: android, ios, desktop, tablet, mobile
          required: false
          schema:
            type: string
        - name: x-nocnoc-cookie-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-session-id
          in: header
          description: Required when x-nocnoc-platform is web
          required: false
          schema:
            type: string 
        - name: x-nocnoc-device-id
          in: header
          description: Required in guest mode
          required: false
          schema:
            type: string 
        - name: Accept-Language
          in: header
          description: Not Required But Default value en
          required: false
          schema:
            type: string 
        - name: Authorization
          in: header
          description: Token From Login
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CartResponse'
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
        '401':
          description: Unauthorized
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponseModel'  
components:
  schemas:
    baseQuotationRequest:
      type: object
      required:
        - quotationSignature
        - quotationData
      properties:
        quotationSignature:
          type: string
          example: hash HMAC
        quotationData:
          type: string
          example: BASE564
    promotionRequest:
      allOf:
        - $ref: '#/components/schemas/baseQuotationRequest'
      type: object
      properties:
        couponCodes:
          type: array
          items:
            type: string
    userOrderListRequest:
        type: object
        properties:
          lang:
            type: string
            example: th
          userType:
            type: string
            example: BUYER
            enum:
              - BUYER
              - ADMIN
          locale:
            type: string
            example: th
            enum:
              - th
              - en
          userId:
            type: number
            example: 10
          limit:
            type: number
            example: 10
          page:
            type: number
            example: 1
          tabType:
            type: string
            example: OPEN
          itemType:
            type: string
            example: sale-orders
          filter:
            type: object
            properties:
              searchTerm:
                type: string
              orderStatus:
                type: string
                example: PAYMENT_PENDING
    userOrderListResponse:
      type: object
      required:
        - status
        - data
      properties:
        status:
          type: string 
          example: SUCCESS
          enum:
            - SUCCESS
            - FAILED
        data:
          type: object
          properties:
            limit:
              type: number
              example: 10
            page:
              type: number
              example: 1
            tabType:
              type: string
              example: OPEN
            itemType:
              type: string
              example: sale-orders
            items:
              type: array
              items:
                $ref: '#/components/schemas/userOrderItem'
            cancellable:
              type: boolean
            extraInfo:
              $ref: '#components/schemas/userOrderExtraInfo'
        errors:
          type: object
          properties:
            code:
              type: string
              example: forbidden
            ref:
              type: string
            msg:
              type: string
    userOrderExtraInfo:
      type: object
      properties:
        statusFilter:
          $ref: '#/components/schemas/userOrderStatusFilter'
        cancelReason:
          $ref: '#/components/schemas/userOrderCancelReason'
    
    userOrderStatusFilter:
      type: object
      properties:
        field:
          type: string
          example: "orderStatus"
        options:
          type: array
          items:
            type: string
          example: 
            - "ALL_OPEN_STATUS"
            - "PAYMENT_PENDING"
            - "PAYMENT_EXPIRED"
            - "ON_HOLD"
            - "PLACED"
            - "ACCEPTED"
            - "READY_TO_SHIP"
            - "IN_TRANSIT"

    userOrderCancelReason:
      type: object
      properties:
        ALL:
          type: array
          items:
            $ref: '#/components/schemas/cancelReasonItem'

    cancelReasonItem:
      type: object
      properties:
        code:
          type: string
          example: "SELLER_REQUESTED_EXTEND_DELIVERY_TIME"
        text:
          type: string
          example: "Seller requested to extend the delivery time"
        sequence:
          type: integer
          example: 800
    userOrderItem:
      type: object
      properties:
        orderNo:
          type: string
          example: "NN-3D34HV3YLDSWV"
        userId:
          type: string
          example: "6565"
        orderPlacedDate:
          type: string
          nullable: true
          example: ""
        orderPlacedTime:
          type: string
          nullable: true
          example: ""
        totalAmount:
          type: string
          format: decimal
          example: "4000.00"
        billingAddress:
          type: string
          example: ""
        retryPaymentDueTime:
          type: integer
          format: int64
          example: 1722509062000000000
        deliveryAddress:
          $ref: '#/components/schemas/deliveryAddress'
        orderCanCancel:
          type: boolean
          example: true
        buyerCanCancelShipment:
          type: boolean
          example: true
        canRetryPay:
          type: boolean
          example: true
        paidOrder:
          type: boolean
          example: false
        paymentSlipUrl:
          type: string
          example: ""
        paymentReference:
          type: string
          format: uuid
          example: "543f1881-688d-4b4c-9ce4-7ce74963552a"
        paymentType:
          type: string
          example: "CARD"
        status:
          type: string
          example: "PAYMENT_PENDING"
    deliveryAddress:
      type: object
      properties:
        addressIdfier:
          type: string
          example: "UNIQUE_ADDRESS_001"
        addressLine1:
          type: string
          example: "123 Example St"
        addressLine2:
          type: string
          example: ""
        fullName:
          type: string
          example: "John Doe"
        phoneNo:
          type: string
          example: "+66910396309"
        city:
          type: string
          example: "Pathum Thani"
        state:
          type: string
          example: "string"
        country:
          type: string
          example: "Countryland"
        zipCode:
          type: string
          example: "12130"
        subDistrictCode:
          type: string
          example: "130601"
        subDistrictName:
          type: string
          example: "Tambon Khu Khot"
        districtCode:
          type: string
          example: "1306"
        districtName:
          type: string
          example: "Amphoe Lam Luk Ka"
        additionalPhoneNo:
          type: string
          example: "string"
        landmark:
          type: string
          example: "Near the central mall"
        addressType:
          type: string
          example: "Home"
        alternateAddress:
          type: string
          example: "string"    


    errorResponse:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            required: ["title", "message"]
            properties:
              title:
                type: string
              message:
                type: string
    ippData:
      type: object
      description: "this object will appear if quotation meet ipp criteria"
      properties:
        descriptions:
          type: array       
          items:
            type: object
            required:
              - isActive
              - bankCode
              - mdr
            properties:
              bankCode:
                type: string
                example: 123
              bankNameTh:
                type: string
                example: บัตรกรุงไทย จำกัด(มหาชน)
              bankNameEn:
                example:  Krungthai Card
              mdr:
                type: number
                format: double
                example: 3.3
              isActive:
                type: boolean
              ippLists:
                $ref: "#/components/schemas/ippDescriptionItem"
    ippDescriptionItem:
        type: object
        required:
          - id
          - term
          - minAmount
        properties:
          id:
            type: number
            example: 1
          term:
            type: number
            example: 4
          nocnocSub:
            type: boolean
          sellerSub:
            type: boolean
          title:
            type: string
            example: 4 เดือน
          minAmount:
            type: number
            example: 3000
    quotationSummaryRequest:
      type: object
      required:
        - quotationSignature
        - quotationData
        - sellers
      properties:
        quotationSignature:
          type: string
          example: hmac
        quotationData:
          type: string
          example: base64
        couponCodes:
          type: array
          items: 
            type: string
          example: [""]
        sellers:
          type: array
          items:
            type: object
            required:
            - id
            - saleOrders
            properties:
              id:
                type: number
              saleOrders:
                type: array
                items:
                  type: object
                  required:
                  - saleOrderRef
                  - defaultDeliveryOption
                  properties:
                    saleOrderRef:
                      type: string
                    defaultDeliveryOption:
                      type: object
                      required:
                        - carrierId
                      properties:
                        carrierId:
                          type: number
                          example: 12
        useNocnocPoint:
          type: boolean
          example: true
    quotationSummaryResponse:
      type: object
      required: ["data"]
      properties:
        data:
          type: object
          required: ["appliedPromotions", "totalPrice", "totalDiscount", "totalPriceAfterDiscount", "totalShippingFee", "totalShippingFeeAfterDiscount", "grandTotalDiscount", "grandTotal"]
          properties:
            quotationData:
              type: string
              example: <base64>
            quotationSignature:
              type: string
              example: <hmac>
            ipp:
              $ref: "#/components/schemas/ippData"
            coupons:
              type: array
              items:
                properties:
                  promotionId: 
                    type: number
                    example: 12345678
                  couponCode:
                    type: string
                    example: "NN1234"
                  limitApplies:
                    type: number
                    example: 1
                  type:
                    type: string
                    example: "NOCNOC_COUPON"
                  status:
                    type: string
                    enum: [VALID, NOTFOUND, ORDER_VALUE_NOT_REACH_MINIMUM]
                    example: "VALID"
            nocnocPoint:
              type: object
              properties:
                availablePoint:
                  type: number
                  example: 0
                isNocNocClubMember:
                  type: boolean
                  example: true
                pointBalance:
                  type: number
                  example: 0
                pointValue:
                  type: number
                  example: 0
            totalPrice:
              type: number
              example: 56300
            totalShopCouponDiscount:
              type: number
              example: 350
            totalPlatformDiscount:
              type: number
              example: 5630
            totalPartnerCouponDiscount:
              type: number
              example: 0
            totalVoucherDiscount:
              type: number
              example: 1000
            totalDiscount:
              type: number
              example: 6980
            totalNocnocPointDiscount:
              type: number
              example: 40
            totalPriceAfterDiscount:
              type: number
              example: 50320
            totalShippingFee:
              type: number
              example: 1770
            totalSellerShippingDiscount:
              type: number
              example: 10
            totalPlatformShippingDiscount:
              type: number
              example: 270
            totalShippingFeeAfterDiscount:
              type: number
              example: 280
            grandTotalDiscount:
              type: number
              example: 7300
            grandTotal:
              type: number
              example: 50770
            currency:
              type: string
              example: ฿
    shipmentDetailResponse:
      type: object
      properties:
        status:
          type: string
          example: SUCCESS
        data:
          type: array
          items:
            $ref: '#/components/schemas/shipment'
    shipmentDetailErrorResponse:
        type: object
        properties:
          status:
            type: string
            example: FAILED
          errors:
            type: array
            items:
              type: object
              properties:
                code:
                  type: string
                  example: Forbidden
                ref:
                  type: string
                msg:
                  type: string
    shipment:
      type: object
      properties:
        shipmentId:
          type: integer
        shipmentIdfier:
          type: string
        shipByDate:
          type: string
          nullable: true
        shipByDateRaw:
          type: string
          nullable: true
        expectedMinDeliveryDate:
          type: string
        expectedMaxDeliveryDate:
          type: string
        cancelledDate:
          type: string
          nullable: true
        expectedMinDeliveryDateRaw:
          type: string
        expectedMaxDeliveryDateRaw:
          type: string
        expectedDeliveryDateRaw:
          type: string
        actualDeliveryDateRaw:
          type: string
          nullable: true
        actualDeliveryDate:
          type: string
          nullable: true
        uploadedInvoice:
          type: boolean
        orderNo:
          type: string
        shipmentStatus:
          type: string
        trackingInfoProvided:
          type: boolean
        cancelReason:
          type: string
        shippingMethod:
          type: string
        sellerName:
          type: string
        sellerShopName:
          type: string
        carrierName:
          type: string
        carrierLogo:
          type: string
        expectedPickupDate:
          type: string
          nullable: true
        expectedDeliveryDate:
          type: string
        customerReqDeliveryDate:
          type: string
          nullable: true
        customerReqDeliveryDateRaw:
          type: string
          nullable: true
        sellerId:
          type: string
        downloadInvoiceUrl:
          type: string
        totalDiscount:
          type: number
          nullable: true
        totalAmount:
          type: string
        installationCost:
          type: number
        readyToShip:
          type: boolean
        billingAddress:
          type: string
        shipmentStatusCode:
          type: string
        freeSampleShipment:
          type: boolean
        buyerCanCancel:
          type: boolean
        buyerConditionalCancel:
          type: boolean
        cancellable:
          type: boolean
        paidOrder:
          type: boolean
        deliveryInProgress:
          type: boolean
        trackingNumbers:
          type: array
          items:
            type: string
          nullable: true
        madeToProduct:
          type: boolean
        userId:
          type: string
        createdUserId:
          type: integer
        invoiceOrigFileName:
          type: string
          nullable: true
        buyerPickupOpted:
          type: boolean
        couponCode:
          type: string
        note:
          type: string
        totalSavings:
          type: number
        installation:
          type: boolean
        listShipmentItems:
          type: array
          items:
            $ref: '#/components/schemas/shipmentItem'
    shipmentItem:
      type: object
      properties:
        skuNumber:
          type: string
        skuId:
          type: string
        skuName:
          type: string
        productWarranty:
          type: string
        quantity:
          type: string
        salePrice:
          type: string
        productInfo:
          $ref: '#/components/schemas/productInfo'
        itemId:
          type: integer
        imageUrl:
          type: string
        userReviewAvailable:
          type: boolean
        userReviewId:
          type: integer
        couponCode:
          type: string
        unit:
          type: string
        installationOrderId:
          type: string
          nullable: true
        installationType:
          type: string
          nullable: true
        categoryId:
          type: integer
        productionLeadTime:
          type: integer
        size:
          type: string
        weightInfo:
          type: string
        totalWeightInfo:
          type: string
        shippingNote:
          type: string
        mpn:
          type: string
        ratingTierThreshold:
          type: integer
        customMade:
          type: boolean
        sample:
          type: boolean
        productKind:
          type: string
    productInfo:
      type: object
      properties:
        title:
          type: string
        name:
          type: string
        desc:
          type: string
        id:
          type: integer
        brand:
          $ref: '#/components/schemas/brand'
        skuId:
          type: integer
        collectionId:
          type: integer
        skuNumber:
          type: string
        skuName:
          type: string
        sellerId:
          type: integer
        sellerName:
          type: string
          nullable: true
        shopName:
          type: string
        categoryId:
          type: integer
        inStock:
          type: boolean
        image:
          type: string
        customMade:
          type: boolean
        comingSoon:
          type: boolean
        lowStock:
          type: boolean
        price:
          type: number
        productSalePrice:
          type: number
          nullable: true
        salePriceEndDate:
          type: string
          nullable: true
        unit:
          type: string
        minQuantity:
          type: integer
        bulkQuantity:
          type: integer
          nullable: true
        bulkPrice:
          type: number
          nullable: true
        priceUnit:
          type: string
          nullable: true
        originalPrice:
          type: number
        originalQuantity:
          type: integer
        cheapestSince:
          type: string
          nullable: true
        priceEffectiveOn:
          type: string
          nullable: true
        pricePromotionStartDate:
          type: string
          nullable: true
        pricePromotionEndDate:
          type: string
          nullable: true
        freeShippingMov:
          type: number
          nullable: true
        unitDiscount:
          type: number
        freeShippingAssured:
          type: boolean
        imageUrl:
          type: string
    brand:
      type: object
      properties:
        image:
          type: string
        brandType:
          type: object
          properties:
            code:
              type: string
            value:
              type: string
        code:
          type: integer
        createdByAPI:
          type: boolean
          nullable: true
        brandID:
          type: string
          nullable: true
        ownerSupplierId:
          type: string
        isGlobal:
          type: boolean
          nullable: true
        o_id:
          type: integer
        smallLogo:
          type: object
          properties:
            imgUrl:
              type: string
            imgWidth:
              type: integer
            imgHeight:
              type: integer
        shortDesc:
          type: string
        shortName:
          type: string
        value:
          type: string
    CreateQuotationRequest:
      required:
        - sellers
        - addressId
      type: object
      properties:
        addressId:
          type: integer
          example: 1
        couponCodes:
          type: array
          items:
            type: string
            example: "1234"
        sellers:
          type: array
          items:
            type: object
            $ref: '#/components/schemas/CreateQuotationDetail'
    CreateQuotationDetail:
      type: object
      required:
        - sellerId
        - products
      properties:
        sellerId:
          type: string
          example: 123
        products:
          type: array
          items:
            type: object
            required:
              - skuNumber
              - quantity
            properties:
              skuNumber:
                type: string
                example: "123456"
              title:
                type: string
                example: "tv 42 inch"
              quantity:
                type: integer
                example: 10
    CreateQuotationResponse:
      type: object
      properties:
        data:
          type: object
          required:
            - quotation
            - userSelection
          properties:
            quotationSignature:
              type: string
              example: hmac
            quotationData:
              type: string
              example: base64
            quotation:
              type: object
              $ref: '#/components/schemas/QuotationDetail'
            invalidProducts:
              type: array
              items:
                $ref: '#/components/schemas/invalidProduct'    
    UpdateQuotationRequest:
      required:
        - quotationData
        - quotationSignature
      type: object
      properties:
        quotationSignature:
          type: string
          example: hmac
        quotationData:
          type: string
          example: base64
        addressId:
              type: number
              example: 11150
        invalidProducts:
              type: array
              items:
                type: object
                properties:
                  skuNumber:
                    type: string
                    example: 123
                  quantity:
                    type: number
                    example: 5
                  sellerId:
                    type: number
                    example: 1234
                    required:
                    - skuNumber
                    - quantity
                    - sellerId  

    SellerDetailRequest:
      type: object
      required:
        - id
        - saleOrders
      properties:
        id:
          type: string
          example: 10
        saleOrders:
          type: array
          items:
            $ref: '#/components/schemas/SaleOrderDetailRequeset'
    SaleOrderDetailRequeset:
      type: object
      required:
        - saleOrderRef
        - defaultDeliveryOption
      properties:
        saleOrderRef:
          type: string
          example: 1847C5D06DF-182AA283221-1668533823437

        defaultDeliveryOption:
          type: object
          required:
            - carrierId
          properties:
           carrierId:
            type: number
            example: 12
    UpdateQuotationResponse:
      type: object
      properties:
        data:
          type: object
          required:
            - quotation
            - quotationSignature
            - quotationData
          properties:
            quotationSignature:
              type: string
              example: hmac
            quotationData:
              type: string
              example: base64
            quotation:
              type: object
              $ref: '#/components/schemas/QuotationDetail'
            invalidProducts:
              type: array
              items:
                $ref: '#/components/schemas/invalidProduct'
    ErrorResponseModel:
      type: object
      properties:
        errors:
          type: array
          items:
            type: object
            $ref: '#/components/schemas/ErrorDetail'
    ErrorDetail:
      type: object
      required:
        - title
        - detail
      properties:
        title:
          type: string
          format: string
          example: title
        detail:
          type: string
          format: string
          example: detail    
    UpdateQuotationDetail:
      type: object
      required:
        - sellerId
        - products
      properties:
        sellerId:
          type: string
          example: 123
        products:
          type: array
          items:
            type: object
            properties:
              skuNumber:
                type: string
                example: "123456"
              quantity:
                type: integer
                example: 10
    QuotationDetail:
      type: object
      required:
        - quotationId
        - addressId
        - sellers
      properties:
        quotationId:
          type: string
          example: MMDD-{{timestamp}}
        addressId:
          type: number
          example: 12
        sellers:
          type: array
          items:
            $ref: '#/components/schemas/SellerDetail'
    invalidProduct:
      type: object
      required:
        - skuNumber
        - type
      properties:
        skuNumber:
          type: string
          example: 123456
        type:
          type: string
          example: OUT_OF_STOCK | UNAVAILABLE | OUT_OF_AREA | QUANTITY_OVER_AVAIABLE_STOCK | QUANTITY_LESS_THAN_MIN_QUANTIY
        quantity:
          type: number
          example: 5
        sellerId:
          type: number
          example: 1234
        price:
          type: number
          example: 12850.58
        priceOriginal:
          type: number
          example: 22850.58
        title:
          type: string
          example: สินค้า
        imageUrl:
          type: string
          example: http://cdn.nocnoc.com
        collectionName:
          type: string
          example: white ,1
        currency:
          type: string
          example: ฿
    SellerDetail:
      type: object
      required:
        - id
        - name
        - saleOrders
      properties:
        id:
          type: string
          example: 10
        name:
          type: string
          example: "nocnoc"
        logo:
          type: string
          example: "http://cdn.nocnoc.com"
        pageUrl:
          type: string
          example: "http://cdn.nocnoc.com"
        tags:
          type: array
          items:
            $ref: '#/components/schemas/TagDetail'
        promotion:
          type: object
          properties:
            shopPromotion:
              type: object
              properties:
                discount:
                  type: number
                  format: float
                  example: 125.51
        saleOrders:
          type: array
          items:
            $ref: '#/components/schemas/SaleOrderDetail'
    SaleOrderDetail:
      type: object
      required:
        - products
        - saleOrderRef
        - defaultDeliveryOption
        - deliveryOptions
      properties:
        saleOrderRef:
          type: string
          example: 1847C5D06DF-182AA283221-1668533823437

        products:
          type: array
          items:
            $ref: '#/components/schemas/ProductDetail'
        defaultDeliveryOption:
          type: object
          required:
            - carrierId
          properties:
           carrierId:
            type: number
            example: 12
        deliveryOptions:
          type: array
          items:
            $ref: '#/components/schemas/DeliveryOptionDetail'
    ProductDetail:
      type: object
      required:
        - skuNumber
        - price
        - priceOriginal
        - currency
      properties:
        skuNumber:
          type: string
          example: 120123
        title:
          type: string
          example: https://cdn.nocnoc.com
        pageUrl:
          type: string
          example: https://cdn.nocnoc.com
        imageUrl:
          type: string
          example: https://cdn.nocnoc.com
        badges:
          type: array
          items:
            $ref: '#/components/schemas/BadgeDetail'
        price:
          type: number
          example: 120.12
        priceOriginal:
          type: number
          example: 120.12
        currency:
          type: string
          example: ฿
        quantity:
          type: integer
          example: 10
        collectionName:
          type: string
          example: white ,1
        categoryId:
          type: number
          example: 12245
        category:
          type: string
          example: Electronic Appliances
        subCategory:
          type: string
          example: Air Conditioners
        subSubCategory:
          type: string
          example: Air Conditioner
    BadgeDetail:
      type: object
      required:
        - backgroundColor
        - textColor
        - borderColor
        - type
        - name
        - key
      properties:
        key:
          type: string
          example: example
        name:
          type: string
          example: example
        type:
          type: string
          example: badge
        backgroundColor:
          type: string
          example: hex
        borderColor:
          type: string
          example: hex
        textColor:
          type: string
          example: hex
        items:
          type: array
          items:
            type: object
            required:
              - iconUrl
              - title
              - description
            properties:
              iconUrl:
                type: string
                example: "http://cdn.nocnoc.com"
              title:
                type: string
                example: ออกใบกำกับภาษีได้
              description:
                type: string
                example: สามารถออกใบกำกับภาษีได้

          
    TagDetail:
      type: object
      required:
        - iconUrl
      properties:
        key:
          type: string
          example: quality-shop
        name:
          type: string
          example: quality-shop
        iconUrl:
          type: string
          example: "http://cdn.nocnoc.com"
    DeliveryOptionDetail:
      type: object
      required:
        - carrierId
        - carrierName
        - finalShippingCost
        - shippingCost
        - currency
        - title
        - description
        - minExpectedDeliveryTime
        - maxExpectedDeliveryTime
        - expectedDeliveryDateLabel
        - expectedDeliveryDate
      properties:
        carrierId:
          type: integer
          example: 1
        carrierName:
          type: string
          example: Kerry
        minExpectedDeliveryTime:
          type: string
          format: date-time
        maxExpectedDeliveryTime:
          type: string
          format: date-time
        expectedDeliveryDateLabel: 
          type: string
          example: 'รับได้ตั้งแต่'
        expectedDeliveryDate: 
          type: string
          example: '25 เม.ย.65 - 30 เม.ย. 65'

        finalShippingCost:
          type: number
          example: 10
        shippingCost:
          type: number
          example: 50
        platformShippingDiscount:
          type: number
          example: 100
        sellerShippingDiscount:
          type: number
          example: 20
        optionType:
          type: string
          example: standardDelivery
        title:
          type: string
          example: "<tag>จัดส่งโดยร้านค้า</tag>"
        description:
          type: string
          example: "<tag>บริการโดยรถขนส่ง</tag>"
        warehouseAddress:
          type: string
          example: "22 ซอยสามัคคี 3 ถนนประชาชื่น แขวง ท่าทราย เขตห้วยขวาง กรุงเทพมหานคร"
        carrierType:
          type: string
          example: standard
        currency:
          type: string
          example: ฿
    CartResponse:
      type: object
      properties:
        data:
          $ref: '#/components/schemas/Data'
        unavailableProducts:
          type: array
          items:
            oneOf:
              - $ref: '#/components/schemas/UnavailableProductOutOfStock'
              - $ref: '#/components/schemas/UnavailableProductUnavailable'
    Data:
      type: object
      properties:
        cartId:
          type: string
          example: 10
        totalItemCount:
          type: integer
          example: 139
        sellers:
          type: array
          items:
            $ref: '#/components/schemas/Seller'
        announcements:
          type: array
          items:
            $ref: '#/components/schemas/Announcement'

    Seller:
      type: object
      properties:
        id:
          type: string
          example: 67614
        name:
          type: string
          example: ABC
        logo:
          type: string
          format: uri
          example: https://qa-cdn.nocnoc-internal.com/static-content/assets/portal-assets/67614/product/images/107/nnfreeshipping_656421862fb14__100x100.jpg
        pageUrl:
          type: string
          format: uri
          example: https://qa-cdn.nocnoc-internal.com/static-content/assets/portal-assets/67614/product/images/107/nnfreeshipping_656421862fb14__100x100.jpg
        tags:
          type: array
          items:
            $ref: '#/components/schemas/Tag'
        products:
          type: array
          items:
            $ref: '#/components/schemas/Product'
        promotions:
          $ref: '#/components/schemas/Promotions'

    Tag:
      type: object
      properties:
        key:
          type: string
          example: quality-shop
        name:
          type: string
          example: quality-shop
        iconUrl:
          type: string
          format: uri
          example: http://cdn.nocnoc.com/2

    Product:
      type: object
      properties:
        id:
          type: string
          example: ggghh-dsad-sdfdsf
        active:
          type: boolean
          example: false
        skuNumber:
          type: string
          example: 12005147
        selected:
          type: boolean
          example: true
        title:
          type: string
          example: "TEST: NocNoc Promo_TH Shipping Promotion"
        pageUrl:
          type: string
          format: uri
          example: https://qa-cdn.nocnoc-internal.com/static-content/assets/portal-assets/67614/product/images/107/nnfreeshipping_656421862fb14__100x100.jpg
        imageUrl:
          type: string
          format: uri
          example: https://qa-cdn.nocnoc-internal.com/static-content/assets/portal-assets/67614/product/images/107/nnfreeshipping_656421862fb14__100x100.jpg
        badges:
          type: array
          items:
            $ref: '#/components/schemas/Badge'
        price:
          type: number
          format: float
          example: 12850.12
        priceOriginal:
          type: number
          format: float
          example: 12900.10
        priceAtAddCartDate:
          type: number
          format: float
          example: 12900.59
        currency:
          type: string
          example: ฿
        discountLabel:
          type: string
          example: ถูกลง ฿20 หลังใส่รถเข็น" || "หลังหักส่วนลด
        minQuantity:
          type: integer
          example: 1
        quantity:
          type: integer
          example: 1
        stock:
          type: integer
          example: 9998
        collectionName:
          type: string
          example: white ,1
        unit:
          type: string
          example: กล่อง
        bundles:
          type: array
          items:
            $ref: '#/components/schemas/Bundle'

    Badge:
      type: object
      properties:
        key:
          type: string
          example: icon
        name:
          type: string
          example: icon
        type:
          type: string
          example: icon
        backgroundColor:
          type: string
          example: hex
        borderColor:
          type: string
          example: hex
        textColor:
          type: string
          example: hex
        items:
          type: array
          items:
            $ref: '#/components/schemas/BadgeItem'

    BadgeItem:
      type: object
      properties:
        iconUrl:
          type: string
          format: uri
          example: http://cdn.nocnoc.com
        title:
          type: string
          example: ออกใบกำกับภาษีได้
        description:
          type: string
          example: สามารถออกใบกำกับภาษีได้

    Bundle:
      type: object
      properties:
        id:
          type: string
          example: hhyy-mmhhxc
        skuNumber:
          type: string
          example: 123456
        selected:
          type: boolean
          example: true
        title:
          type: string
          example: ล้างแอร์
        imageUrl:
          type: string
          format: uri
          example: http://cdn.nocnoc.com
        parentId:
          type: string
          example: 12005147
        price:
          type: number
          format: float
          example: 12850.10
        priceOriginal:
          type: number
          format: float
          example: 12900.01
        priceAtAddCartDate:
          type: number
          format: float
          example: 12900.01
        currency:
          type: string
          example: ฿
        discountLabel:
          type: string
          example: ถูกลง ฿20 หลังใส่รถเข็น" || "หลังหักส่วนลด
        minQuantity:
          type: integer
          example: 1
        quantity:
          type: integer
          example: 1
        stock:
          type: integer
          example: 9998
        collectionName:
          type: string
          example: ''

    Promotions:
      type: object
      properties:
        shopPromotions:
          $ref: '#/components/schemas/PromotionDetails'
        shippingPromotions:
          $ref: '#/components/schemas/ShippingPromotionDetails'

    PromotionDetails:
      type: object
      properties:
        discount:
          type: number
          format: float
          example: 5000.10
        items:
          type: array
          items:
            $ref: '#/components/schemas/PromotionItem'

    ShippingPromotionDetails:
      type: object
      properties:
        discount:
          type: number
          format: float
        items:
          type: array
          items:
            $ref: '#/components/schemas/ShippingPromotionItem'

    PromotionItem:
      type: object
      properties:
        id:
          type: integer
          example: 182924
        title:
          type: string
          example: ส่วนลด 12%  สูงสุด 5000 บาท
        promotionName:
          type: string
          example: Summer Sale
        couponCode:
          type: string
          example: NN-12345
        maxAllowedDiscount:
          type: number
          format: float
          example: 500.10
        discount:
          type: number
          format: float
          example: 3
        discountType:
          type: string
          example: PERCENT
        condition:
          type: string
          example: รับส่วนลด 12% สูงสุด ฿5,000 เมื่อช้อปครบ ฿10,000
        description:
          type: string
          example: คำอธิบายเพิ่มเติมอะไรก็ได้จ้า
        startDate:
          type: string
          format: date-time
          example: 2024-03-14T17:00:00Z
        endDate:
          type: string
          format: date-time
          example: 2024-03-14T17:00:00Z

    ShippingPromotionItem:
      type: object
      properties:
        id:
          type: integer
          example: 153581
        shippingType:
          type: string
          example: freeshipping
        promotionName:
          type: string
          example: จัดส่งฟรี
        marketingMessage:
          type: string
          example: จัดส่งฟรีทั่วประเทศ
        shippingMethods:
          type: array
          items:
            type: string
            example: sellerDelivery
        startDate:
          type: string
          format: date-time
          example: 2024-03-14T17:00:00Z
        endDate:
          type: string
          format: date-time
          example: 2024-03-14T17:00:00Z

    Announcement:
      type: object
      properties:
        title:
          type: string
          example: ซื้ออีก ฿5466.0 เพื่อซื้อแบบผ่อนชำระ
        level:
          type: string
          example: info
        key:
          type: string
          example: platformintsallment

    UnavailableProductOutOfStock:
      type: object
      properties:
        id:
          type: string
          example: 1234
        skuNumber:
          type: string
          example: 10001123
        type:
          type: string
          enum: [OUT_OF_STOCK]
        price:
          type: number
          format: float
          example: 1294.50
        priceOriginal:
          type: number
          format: float
          example: 12900.10
        title:
          type: string
          example: โซฟาถูกและดี
        imageUrl:
          type: string
          format: uri
          example: http://cdn.nocnoc.com
        collectionName:
          type: string
          example: white ,1
        currency:
          type: string
          example: ฿

    UnavailableProductUnavailable:
      type: object
      properties:
        id:
          type: string
          example: 1234
        skuNumber:
          type: string
          example: 10001123
        type:
          type: string
          enum: [UNAVAILABLE]
        title:
          type: string
          example: โซฟาถูกและดี
  securitySchemes:
    bearer:
      type: http
      scheme: bearer
      bearerFormat: "JWT"
      
security:
  - bearer: []

